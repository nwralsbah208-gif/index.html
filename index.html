<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>2D Web Game</title>
<style>
body{
  margin:0;
  background:#000;
  overflow:hidden;
}
canvas{
  display:block;
  margin:auto;
  background:linear-gradient(#0a1a3a,#000);
}
#ui{
  position:fixed;
  top:10px;
  left:10px;
  color:#0ff;
  font-family:tahoma;
  font-size:16px;
}
</style>
</head>
<body>

<div id="ui">
â­ Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span>
</div>

<canvas id="game" width="900" height="500"></canvas>

<script>
// =====================
// Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
// =====================
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0;
let gameOver = false;

// =====================
// Ø§Ù„Ù„Ø§Ø¹Ø¨
// =====================
const player = {
  x:100,
  y:380,
  w:40,
  h:40,
  yVel:0,
  onGround:false
};

// =====================
// Ø§Ù„Ø£Ø±Ø¶
// =====================
const ground = {
  y:430
};

// =====================
// Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
// =====================
let enemies = [];

// Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ø¯Ùˆ
function spawnEnemy(){
  enemies.push({
    x: canvas.width + Math.random()*200,
    y:390,
    r:20,
    speed: 2 + Math.random()*3
  });
}

// =====================
// Ø§Ù„ØªØ­ÙƒÙ…
// =====================
document.addEventListener("keydown", e=>{
  if(e.key===" " && player.onGround){
    player.yVel = -12;
    player.onGround = false;
  }
});

// =====================
// Ø§Ù„ØªØ­Ø¯ÙŠØ«
// =====================
function update(){
  if(gameOver) return;

  // Ø¬Ø§Ø°Ø¨ÙŠØ©
  player.yVel += 0.6;
  player.y += player.yVel;

  // Ø£Ø±Ø¶
  if(player.y + player.h >= ground.y){
    player.y = ground.y - player.h;
    player.yVel = 0;
    player.onGround = true;
  }

  // Ø£Ø¹Ø¯Ø§Ø¡
  enemies.forEach(e=>{
    e.x -= e.speed;

    // ØªØµØ§Ø¯Ù…
    if(
      player.x < e.x + e.r &&
      player.x + player.w > e.x - e.r &&
      player.y < e.y + e.r &&
      player.y + player.h > e.y - e.r
    ){
      gameOver = true;
    }
  });

  // Ø­Ø°Ù Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
  enemies = enemies.filter(e=>{
    if(e.x < -50){
      score++;
      document.getElementById("score").innerText = score;
      return false;
    }
    return true;
  });
}

// =====================
// Ø§Ù„Ø±Ø³Ù…
// =====================
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Ø§Ù„Ù‚Ù…Ø±
  ctx.beginPath();
  ctx.arc(700,80,50,0,Math.PI*2);
  ctx.fillStyle="#fff";
  ctx.shadowBlur=20;
  ctx.shadowColor="#fff";
  ctx.fill();
  ctx.shadowBlur=0;

  // Ø§Ù„Ø£Ø±Ø¶
  ctx.fillStyle="#654321";
  ctx.fillRect(0,ground.y,canvas.width,70);

  // Ø§Ù„Ù„Ø§Ø¹Ø¨
  ctx.fillStyle="#00ffff";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  // Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¡
  ctx.fillStyle="red";
  enemies.forEach(e=>{
    ctx.beginPath();
    ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
    ctx.fill();
  });

  if(gameOver){
    ctx.fillStyle="black";
    ctx.globalAlpha=0.7;
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.globalAlpha=1;
    ctx.fillStyle="red";
    ctx.font="40px Tahoma";
    ctx.fillText("ğŸ’€ Ø®Ø³Ø±Øª", canvas.width/2-80, canvas.height/2);
  }
}

// =====================
// Ø­Ù„Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
// =====================
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}

// =====================
// ØªØ´ØºÙŠÙ„
// =====================
setInterval(spawnEnemy,1500);
loop();
</script>

</body>
</html>
