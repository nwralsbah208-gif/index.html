<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Shooter 2D</title>
<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  touch-action:none;
}
canvas{
  display:block;
  margin:auto;
  background:#111;
}
.btn{
  position:fixed;
  width:70px;
  height:70px;
  border-radius:50%;
  background:rgba(255,255,255,0.15);
  color:white;
  font-size:24px;
  text-align:center;
  line-height:70px;
  user-select:none;
}
#left{bottom:20px;left:20px;}
#right{bottom:20px;left:110px;}
#up{bottom:110px;left:65px;}
#shoot{bottom:40px;right:30px;background:rgba(255,0,0,0.5);}
</style>
</head>
<body>

<canvas id="game" width="900" height="500"></canvas>

<div class="btn" id="left">â—€</div>
<div class="btn" id="right">â–¶</div>
<div class="btn" id="up">â–²</div>
<div class="btn" id="shoot">ðŸ”¥</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ===== Ø§Ù„Ù„Ø§Ø¹Ø¨ =====
const player = {
  x:100,
  y:350,
  w:40,
  h:40,
  speed:4,
  yVel:0,
  onGround:false
};

// ===== Ø§Ù„Ø£Ø±Ø¶ =====
const groundY = 420;

// ===== Ø§Ù„Ø±ØµØ§Øµ =====
let bullets = [];

// ===== Ø§Ù„ÙˆØ­ÙˆØ´ =====
let enemies = [];

// ===== ØªØ­ÙƒÙ… =====
let controls = {left:false,right:false,up:false,shoot:false};

// ===== Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¬ÙˆØ§Ù„ =====
function bindBtn(id,key){
  const b=document.getElementById(id);
  b.addEventListener("touchstart",()=>controls[key]=true);
  b.addEventListener("touchend",()=>controls[key]=false);
}
bindBtn("left","left");
bindBtn("right","right");
bindBtn("up","up");
bindBtn("shoot","shoot");

// ===== Ø¥Ø·Ù„Ø§Ù‚ Ù†Ø§Ø± =====
let shootDelay=0;
function shoot(){
  if(shootDelay<=0){
    bullets.push({
      x:player.x+player.w,
      y:player.y+player.h/2,
      speed:8
    });
    shootDelay=10;
  }
}

// ===== ÙˆØ­Ø´ =====
function spawnEnemy(){
  enemies.push({
    x:canvas.width+50,
    y:groundY-40,
    w:40,
    h:40,
    speed:2+Math.random()*2
  });
}
setInterval(spawnEnemy,1200);

// ===== ØªØ­Ø¯ÙŠØ« =====
function update(){
  // Ø­Ø±ÙƒØ©
  if(controls.left) player.x-=player.speed;
  if(controls.right) player.x+=player.speed;

  if(controls.up && player.onGround){
    player.yVel=-12;
    player.onGround=false;
  }

  player.yVel+=0.6;
  player.y+=player.yVel;

  if(player.y+player.h>=groundY){
    player.y=groundY-player.h;
    player.yVel=0;
    player.onGround=true;
  }

  // Ø¥Ø·Ù„Ø§Ù‚
  if(controls.shoot) shoot();
  if(shootDelay>0) shootDelay--;

  bullets.forEach(b=>b.x+=b.speed);
  bullets=bullets.filter(b=>b.x<canvas.width);

  enemies.forEach(e=>e.x-=e.speed);

  // ØªØµØ§Ø¯Ù… Ø±ØµØ§Øµ
  enemies=enemies.filter(e=>{
    for(let b of bullets){
      if(
        b.x>e.x && b.x<e.x+e.w &&
        b.y>e.y && b.y<e.y+e.h
      ){
        return false;
      }
    }
    return e.x>-50;
  });
}

// ===== Ø±Ø³Ù… =====
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Ø£Ø±Ø¶
  ctx.fillStyle="#333";
  ctx.fillRect(0,groundY,canvas.width,80);

  // Ù„Ø§Ø¹Ø¨
  ctx.fillStyle="red";
  ctx.fillRect(player.x,player.y,player.w,player.h);

  // Ø±Ø´Ø§Ø´
  ctx.fillStyle="#aaa";
  ctx.fillRect(player.x+player.w,player.y+15,15,6);

  // Ø±ØµØ§Øµ
  ctx.fillStyle="yellow";
  bullets.forEach(b=>{
    ctx.fillRect(b.x,b.y,8,3);
  });

  // ÙˆØ­ÙˆØ´
  ctx.fillStyle="green";
  enemies.forEach(e=>{
    ctx.fillRect(e.x,e.y,e.w,e.h);
  });
}

// ===== Ø­Ù„Ù‚Ø© =====
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>

</body>
</html>
